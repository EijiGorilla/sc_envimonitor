"use strict";(self.webpackChunksc_envimonitor=self.webpackChunksc_envimonitor||[]).push([[4714],{34311:(t,e,n)=>{function i(t,e,n){return{objectId:t,target:e,distance:n,type:"vertex"}}function o(t,e,n,i,o){return{objectId:t,target:e,distance:n,type:"edge",start:i,end:o,draped:arguments.length>5&&void 0!==arguments[5]&&arguments[5]}}n.d(e,{p:()=>o,u:()=>i})},34610:(t,e,n)=>{n.d(e,{Kb:()=>r,o2:()=>c,sV:()=>l,xn:()=>a});var i=n(51995),o=n(56011);function s(t,e){if(!t||t.symbol)return null;const n=null===e||void 0===e?void 0:e.renderer;return t&&null!=n&&n.getObservationRenderer?n.getObservationRenderer(t):n}function r(t,e){var n;const i=s(t,e),r=function(t,e){if(null!=t.symbol)return t.symbol;const n=s(t,e);return null!=n&&"dot-density"!==n.type?n.getSymbol(t,e):null}(t,e);if(null==r)return null;const a={renderer:i,symbol:r};if(null==i||!("visualVariables"in i)||!i.visualVariables)return a;const l=null!==(n=(0,o.getVisualVariableValues)(i,t,e))&&void 0!==n?n:[],c=["proportional","proportional","proportional"];for(const{variable:o,value:s}of l)switch(o.type){case"color":a.color=s.toRgba();break;case"size":if("outline"===o.target)a.outlineSize=s;else{const t=o.axis,e=o.useSymbolValue?"symbol-value":s;switch(t){case"width":c[0]=e;break;case"depth":c[1]=e;break;case"height":c[2]=e;break;case"width-and-depth":c[0]=c[1]=e;break;default:c[0]=c[1]=c[2]=e}}break;case"opacity":a.opacity=s;break;case"rotation":switch(o.axis){case"tilt":a.tilt=s;break;case"roll":a.roll=s;break;default:a.heading=s}}return"proportional"===c[0]&&"proportional"===c[1]&&"proportional"===c[2]||(a.size=c),a}async function a(t,e){var n;const r=s(t,e),a=await async function(t,e){if(null!=t.symbol)return t.symbol;const n=s(t,e);return null!=n?n.getSymbolAsync(t,e):null}(t,e);if(!a)return null;const l={renderer:r,symbol:a};if(!r||!("visualVariables"in r)||!r.visualVariables)return l;const c=null!==(n=(0,o.getVisualVariableValues)(r,t,e))&&void 0!==n?n:[],u=["proportional","proportional","proportional"];for(const{variable:o,value:s}of c)if("color"===o.type)l.color=i.Z.toUnitRGBA(s);else if("size"===o.type)if("outline"===o.target)l.outlineSize=s;else{const t=o.axis,e=o.useSymbolValue?"symbol-value":s;"width"===t?u[0]=e:"depth"===t?u[1]=e:"height"===t?u[2]=e:u[0]=u[1]="width-and-depth"===t?e:u[2]=e}else"opacity"===o.type?l.opacity=s:"rotation"===o.type&&"tilt"===o.axis?l.tilt=s:"rotation"===o.type&&"roll"===o.axis?l.roll=s:"rotation"===o.type&&(l.heading=s);return(isFinite(u[0])||isFinite(u[1])||isFinite(u[2]))&&(l.size=u),l}function l(t){const e=t[arguments.length>1&&void 0!==arguments[1]?arguments[1]:0];return"number"==typeof e&&isFinite(e)?e:null}function c(t){for(let e=0;e<3;e++){const n=t[e];if("number"==typeof n)return isFinite(n)?n:0}return 0}},4714:(t,e,n)=>{n.d(e,{A:()=>q,m:()=>Z});var i=n(9236),o=(n(93169),n(10064)),s=n(84652),r=n(68860),a=n(79347),l=n(29303),c=n(21389),u=n(29134),h=n(7025),d=n(32035),p=n(12400),g=n(37998),y=n(41414),f=n(86372),m=n(39406),b=n(11186),v=n(34311),_=n(34610),x=n(50951),S=n(69691),w=n(58063),P=n(73614),E=n(96387),I=n(41325),O=n(64098),C=n(97689),R=n(94463),U=n(77648),T=n(27689),M=n(16010),L=n(91526),A=n(68401),V=n(79100),z=n(2952),D=n(17579),B=n(52920),N=n(66327),k=n(4760),F=n(72969);const G=["polygon","extent"];class Z extends P.k{constructor(t,e,n,i){super(t,e,n,i),this.ensureDrapedStatus(!1)}async doLoad(){var t,e;if(!this._drivenProperties.size){const t=(0,E.bh)(this._getSymbolSize());if(t)throw new o.Z("graphics3dextrudesymbollayer:invalid-size",t)}const n=null===(t=this.symbolLayer)||void 0===t||null===(t=t.material)||void 0===t?void 0:t.color,s=this._getCombinedOpacityAndColor(n),r=(0,p.nI)(s),a=s[3],l=a<1||this.needsDrivenTransparentPass,c=null===(e=this.symbolLayer)||void 0===e||null===(e=e.material)||void 0===e?void 0:e.emissiveFactor,u=c?(0,d.L)((0,p.d9)(c)):p.AG,h={usePBR:this._context.physicalBasedRenderingEnabled,isSchematic:!0,diffuse:r,ambient:r,opacity:a,transparent:l,cullFace:l?A.Vr.None:A.Vr.Back,hasVertexColors:!0,hasSlicePlane:this._context.slicePlaneEnabled,castShadows:this.symbolLayer.castShadows,emissiveFactor:u,offsetTransparentBackfaces:!0,normalType:M.r.Compressed};this._materials[pt.Main]=new F.Gp(h,this._context),this._materials[pt.Bottom]=new F.Gp((0,i.Z)((0,i.Z)({},h),{},{cullFace:A.Vr.Back}),this._context),this._context.stage.addMany(this._materials)}destroy(){super.destroy(),this._context.stage.removeMany(this._materials),this._materials.length=0}createGraphics3DGraphic(t){const e=t.graphic;if(!this._validateGeometry(e.geometry,G,this.symbolLayer.type))return null;const n=this._getVertexOpacityAndColor(t.renderingInfo,255),i=this.setGraphicElevationContext(e);return this._createAs3DShape(e,t.renderingInfo,n,i,e.uid)}layerOpacityChanged(t,e){var n,i,o;const s=null===(n=this.symbolLayer)||void 0===n||null===(n=n.material)||void 0===n?void 0:n.color,r=this._getCombinedOpacity(s),a=r<1||this.needsDrivenTransparentPass;null!==(i=this._materials[pt.Main])&&void 0!==i&&i.setParameters({opacity:r,transparent:a}),null===(o=this._materials[pt.Bottom])||void 0===o||o.setParameters({opacity:r,transparent:a});const l=this._getLayerOpacity();t.forEach((t=>{var n;return null===(n=e(t))||void 0===n?void 0:n.layerOpacityChanged(l,this._context.isAsync)}))}layerElevationInfoChanged(t,e){return this.updateGraphics3DGraphicElevationInfo(t,e,S.B5)}slicePlaneEnabledChanged(t,e){var n,i;return null!==(n=this._materials[pt.Main])&&void 0!==n&&n.setParameters({hasSlicePlane:this._context.slicePlaneEnabled}),null!==(i=this._materials[pt.Bottom])&&void 0!==i&&i.setParameters({hasSlicePlane:this._context.slicePlaneEnabled}),t.forEach((t=>{const n=e(t);null!=n&&n.slicePlaneEnabledChanged(this._context.slicePlaneEnabled,this._context.isAsync)})),!0}physicalBasedRenderingChanged(){var t,e;const n={usePBR:this._context.physicalBasedRenderingEnabled,isSchematic:!0};return null!==(t=this._materials[pt.Main])&&void 0!==t&&t.setParameters(n),null!==(e=this._materials[pt.Bottom])&&void 0!==e&&e.setParameters(n),!0}_getExtrusionSize(t){var e;let n;return n=t.size&&this._drivenProperties.size?null!==(e=(0,_.sV)(t.size,2))&&void 0!==e?e:0:this._getSymbolSize(),n/=this._context.renderCoordsHelper.unitInMeters,n}applyRendererDiff(t,e){return this._drivenPropertiesChanged(e)?I.W.RecreateSymbol:I.W.RecreateGraphics}async queryForSnapping(t,e,n,i){var o;const a=this._getExtrusionSize(n)*this._context.renderCoordsHelper.unitInMeters/(0,r._R)(e),{objectId:l,target:c}=t,u=(0,s.d9)(c);switch(u.z=(null!==(o=u.z)&&void 0!==o?o:0)+a,t.type){case"edge":{var h,d;const{start:e,end:n}=t,i=(0,s.d9)(e),o=(0,s.d9)(n);return i.z=(null!==(h=i.z)&&void 0!==h?h:0)+a,o.z=(null!==(d=o.z)&&void 0!==d?d:0)+a,[(0,v.p)(l,u,1/0,i,o)]}case"vertex":return[(0,v.u)(l,u,1/0),(0,v.p)(l,c,1/0,c,u)];default:return[]}}_getSymbolSize(){var t;return null!==(t=this.symbolLayer.size)&&void 0!==t?t:1}_createAs3DShape(t,e,n,i,o){const s=(0,O.Nu)(t.geometry);if(null==s)return null;if(0===s.rings.length||!s.rings.some((t=>t.length>0)))return this._logGeometryValidationWarnings(s.rings,"rings","ExtrudeSymbol3DLayer"),null;const r=(0,T.VP)(s,this._context.elevationProvider,this._context.renderCoordsHelper,i);this._logGeometryCreationWarnings(r,s.rings,"rings","ExtrudeSymbol3DLayer");const v=(0,E.zE)(s);if(null==v)return null;const _=new Array,P=new Array,I=(0,y.Ue)(),M=(0,h.Ue)(),L=(0,p.Ue)(),A=this._context.renderCoordsHelper.viewingMode===x.JY.Global;A||this._context.renderCoordsHelper.worldUpAtPosition(null,L),(0,g.B)(s.spatialReference,[v.x,v.y,0],M,this._context.renderCoordsHelper.spatialReference);const V=(0,h.Ue)();(0,u.U_)(V,M);const z=(0,c.Ue)();(0,l.XL)(z,V);const{polygons:F,mapPositions:G,position:Z}=r,H=new Map,W=this._materials[pt.Main];for(const l of F){const t=l.count;if(this._context.clippingExtent&&((0,y.FY)(l.mapPositions,I),!(0,y.Zp)(I,this._context.clippingExtent)))continue;const i=(0,a.e)(l.mapPositions,l.holeIndices,3);if(0===i.length)continue;const s=i.length,r=6*t,c=(0,m.$z)(r+s),u=(0,m.$z)(s),h=(0,f.bg)(3*r),d=(0,f.bg)(3*r),p=(0,f.bg)(3*r),g=(0,f.bg)(r);q(Z,G,i,l,h,p,d,g,c,u,this._getExtrusionSize(e),L,A),(0,b.t)(h,h,V);const v=this._context.stage.renderView.getObjectAndLayerIdColor({graphicUid:o,layerUid:this._context.layer.uid}),x=new yt(h,p,(0,B.nG)(d),g),S=j(W,c,c.length-u.length,x,n,v),w=t,E=t,O=2*l.count,C=new ft(w,E,O,s/3);nt(S,C,M),H.set(S,C),_.push(S,j(this._materials[pt.Bottom],u,0,x,n,v)),P.push(x.heights)}if(0===_.length)return null;const J=new N.T({geometries:_,layerUid:this._context.layer.uid,graphicUid:o,isElevationSource:!0});J.transformation=M;const Y=(0,C.hM)(this.symbolLayer,{opacity:this._getLayerOpacity()}),$=Y?new w.n(this._materials[pt.Main],Y,this._context.slicePlaneEnabled):null,K=new w.z(this,J,_,null,null,((t,e,n,i,o)=>function(t,e,n,i,o,s,r){const a=t.stageObject,l=a.geometries,c=l.length,p="absolute-height"!==e.mode;let g=0;const y=a.transformation,f=(0,u.iS)((0,h.Ue)(),y);for(let u=0;u<c;u+=2){const t=l[u];if(!(0,D.T)(t))continue;const e=t.getMutableAttribute(k.T.POSITION).data,c=s[u/2],h=new U.sb(t.mapPositions),m=e.length/3;let b=!1,v=0;{let t=0;for(let s=0;s<m;s++){et[0]=e[t],et[1]=e[t+1],et[2]=e[t+2],i(h,st),p&&(v+=st.sampledElevation),R.h.TESTS_DISABLE_OPTIMIZATIONS?((0,d.i)(it,h.array[h.offset],h.array[h.offset+1],st.z+c[t/3]),null!=n&&o.toRenderCoords(it,n,it),(0,d.t)(it,it,f)):((0,d.i)(it,e[t],e[t+1],e[t+2]),(0,d.t)(it,it,y),o.setAltitude(it,st.z+c[t/3]),(0,d.t)(it,it,f)),e[t]=it[0],e[t+1]=it[1],e[t+2]=it[2];const s=lt/o.unitInMeters;(Math.abs(et[0]-e[t])>=s||Math.abs(et[1]-e[t+1])>=s||Math.abs(et[2]-e[t+2])>=s)&&(b=!0),h.offset+=3,t+=3}}if(b){const e=r.get(t);e&&nt(t,e,y),a.geometryVertexAttributeUpdated(l[u],k.T.NORMALCOMPRESSED),t.invalidateBoundingInfo(),a.geometryVertexAttributeUpdated(l[u],k.T.POSITION),l[u+1].invalidateBoundingInfo(),a.geometryVertexAttributeUpdated(l[u+1],k.T.POSITION)}g+=v/m}return g/c}(t,e,n,i,o,P,H)),i,$);return K.alignedSampledElevation=r.sampledElevation,K.needsElevationUpdates=(0,S.B5)(i.mode),K}}function j(t,e,n,i,o,s){const r=(0,m.LE)(e.length),a=[[k.T.POSITION,new L.a(i.positions,e,3,!0)],[k.T.NORMALCOMPRESSED,new L.a(i.normals,e,2,!0)],[k.T.COLOR,new L.a(o,r,4,!0)]];return new z.Z(t,a,i.elevation,V.U.Mesh,s,n)}function q(t,e,n,i,o,s,r,a,l,c,u,h,p){{const g=n.length/3,y=2*i.count;!function(t,e,n,i,o,s,r,a,l,c,u,h,p,g,y,f,m){(0,d.c)(ot,f);{const o=y>0?1:-1;let s=3*n,r=0,h=3*r,p=i,g=3*p;for(let n=0;n<i;++n){const n=t[s],i=t[s+1],f=t[s+2];m&&(ot[0]=n,ot[1]=i,ot[2]=f,(0,d.n)(ot,ot)),a[h+0]=n,a[h+1]=i,a[h+2]=f;const b=e[s+0],v=e[s+1],_=e[s+2];l[h+0]=b,l[h+1]=v,l[h+2]=_,c[h+0]=-o*ot[0],c[h+1]=-o*ot[1],c[h+2]=-o*ot[2],u[r]=0,a[g+0]=n+y*ot[0],a[g+1]=i+y*ot[1],a[g+2]=f+y*ot[2],l[g+0]=b,l[g+1]=v,l[g+2]=_,u[p]=y,h+=3,g+=3,s+=3,r+=1,p+=1}}{let t=3*s,e=0,n=3*g;const a=y<0?at:rt,l=y<0?rt:at;for(let s=0;s<r;++s)p[e]=o[t+a[0]],p[e+1]=o[t+a[1]],p[e+2]=o[t+a[2]],h[n]=o[t+l[0]]+i,h[n+1]=o[t+l[1]]+i,h[n+2]=o[t+l[2]]+i,e+=3,n+=3,t+=3}}(t,e,i.index,i.count,n,0,g,o,s,r,a,l,c,y,u,h,p)}{let t=0,e=2*i.count,n=0;const c=i.pathLengths[0];J(o,s,a,r,t,c,i.count,e,l,n,u),e+=4*c,n+=2*c,t+=c;for(let h=1;h<i.pathLengths.length;++h){const c=i.pathLengths[h];J(o,s,a,r,t,c,i.count,e,l,n,u),e+=4*c,n+=2*c,t+=c}}}function H(t,e,n,i,o,s,r){i[s]=i[r],r*=3,t[s*=3]=t[r],t[s+1]=t[r+1],t[s+2]=t[r+2],e[s]=e[r],e[s+1]=e[r+1],e[s+2]=e[r+2],n[s]=o[0],n[s+1]=o[1],n[s+2]=o[2]}const W=(0,p.Ue)();function J(t,e,n,i,o,s,r,a,l,c,u){let h=o,d=o+1,p=o+r,g=o+r+1,y=a,f=a+1,m=a+2*s,b=a+2*s+1;u<0&&(h=o+r+1,g=o);let v=3*c;for(let _=0;_<s;++_)_===s-1&&(d=o,u>0?g=o+r:h=o+r),tt(t,h,d,p,W),H(t,e,i,n,W,y,h),H(t,e,i,n,W,f,d),H(t,e,i,n,W,m,p),H(t,e,i,n,W,b,g),l[v]=y,l[v+1]=m,l[v+2]=b,l[v+3]=y,l[v+4]=b,l[v+5]=f,v+=6,h++,d++,p++,g++,y+=2,f+=2,m+=2,b+=2}const Y=(0,p.Ue)(),$=(0,p.Ue)(),K=(0,p.Ue)(),X=(0,p.Ue)(),Q=(0,p.Ue)();function tt(t,e,n,i,o){e*=3,n*=3,i*=3,(0,d.i)(Y,t[e++],t[e++],t[e++]),(0,d.i)($,t[n++],t[n++],t[n++]),(0,d.i)(K,t[i++],t[i++],t[i++]),(0,d.d)(X,$,Y),(0,d.d)(Q,K,Y),(0,d.e)(o,Q,X),(0,d.n)(o,o)}const et=(0,p.Ue)();function nt(t,e,n){const i=t.getMutableAttribute(k.T.POSITION),o=t.getMutableAttribute(k.T.NORMALCOMPRESSED).data,{topVertexStart:s,topVertexCount:r,topFaceStart:a,topFaceCount:l}=e,c=i.data,u=r,h=t.attributes.get(k.T.POSITION).indices,p=a+l,g=s+r,y=(0,f.bg)(3*u);for(let d=0;d<u;++d){const t=3*d;y[t+0]=0,y[t+1]=0,y[t+2]=0}const m=ct,b=ut,v=ht,_=dt,x=ot;for(let f=a;f<p;++f){const t=3*f;for(let e=0;e<3;++e){const i=h[t+e];_[e]=i;const o=3*i;(0,d.i)(it,c[o+0],c[o+1],c[o+2]),(0,d.t)(m[e],it,n)}(0,d.a)(b,m[1],m[0]),(0,d.a)(v,m[2],m[0]),(0,d.e)(x,b,v),(0,d.n)(x,x);for(let e=0;e<3;++e){const t=3*(_[e]-s);y[t+0]+=x[0],y[t+1]+=x[1],y[t+2]+=x[2]}}for(let d=s;d<g;++d){const t=3*(d-s),e=y[t+0],n=y[t+1],i=y[t+2],r=Math.sqrt(e*e+n*n+i*i);(0,B.hd)(o,d,e/r,n/r,i/r)}}const it=(0,p.Ue)(),ot=(0,p.Ue)(),st=new S.Lm,rt=[0,2,1],at=[0,1,2],lt=.01,ct=[(0,p.Ue)(),(0,p.Ue)(),(0,p.Ue)()],ut=(0,p.Ue)(),ht=(0,p.Ue)(),dt=[0,0,0];var pt,gt;(gt=pt||(pt={}))[gt.Main=0]="Main",gt[gt.Bottom=1]="Bottom";class yt{constructor(t,e,n,i){this.positions=t,this.elevation=e,this.normals=n,this.heights=i}}class ft{constructor(t,e,n,i){this.topVertexStart=t,this.topVertexCount=e,this.topFaceStart=n,this.topFaceCount=i}}},64098:(t,e,n)=>{n.d(e,{JJ:()=>m,LN:()=>p,Nu:()=>f,dd:()=>y,z:()=>g});n(59486);var i=n(79347),o=n(14320),s=n(39406),r=n(26844),a=n(91526),l=n(79100),c=n(2952),u=n(4760),h=n(53866),d=n(80885);function p(t,e,n){const s=(e.length>0?e[0]:t.length/3)-1,a=(0,r.i)(t,s,n);if(a!==o.R.Z){t=t.slice();for(let e=0;e<t.length;e+=3)t[e+a]=t[e+2]}return(0,i.e)(t,e,3)}function g(t){const e=[[u.T.POSITION,new a.a(t.attributeData.position,t.indices,3,!0)]],n=(0,s.LE)(t.indices.length);return null!=t.attributeData.colorFeature?e.push([u.T.COLORFEATUREATTRIBUTE,new a.a([t.attributeData.colorFeature],n,1,!0)]):t.attributeData.color&&e.push([u.T.COLOR,new a.a(t.attributeData.color,n,4,!0)]),t.attributeData.uvMapSpace&&e.push([u.T.UVMAPSPACE,new a.a(t.attributeData.uvMapSpace,t.indices,4,!0)]),t.attributeData.boundingRect&&e.push([u.T.BOUNDINGRECT,new a.a(t.attributeData.boundingRect,t.indices,9,!0)]),new c.Z(t.material,e,t.mapPositions,l.U.Mesh,t.attributeData.objectAndLayerIdColor)}function y(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=[[u.T.POSITION,new a.a(t.attributeData.position,t.indices,3,!0)],[u.T.UV0,new a.a(t.attributeData.uv0,t.indices,2,!0)]];return new c.Z(t.material,n,t.mapPositions,l.U.Mesh,e)}function f(t){switch(t.type){case"extent":if(t instanceof h.Z)return d.Z.fromExtent(t);break;case"polygon":return t}return null}class m{constructor(t,e,n){this.renderData=t,this.layerUid=e,this.graphicUid=n,this.outGeometries=new Array}}},27689:(t,e,n)=>{n.d(e,{VP:()=>l,rm:()=>c});var i=n(50628),o=n(86372),s=n(91320),r=n(69691),a=n(19265);function l(t,e,n,i){const a=(0,s.Ni)(t.rings,!!t.hasZ&&"on-the-ground"!==i.mode,s.ZI.CCW_IS_HOLE,t.spatialReference),l=(0,o.bg)(a.position.length),c=(0,r.rR)(a.position,t.spatialReference,0,l,0,a.position,0,a.position.length/3,e,n,i),d=null!=c;return new f(a.position,l,h(a.polygons,a.position,l),u(a.outlines,a.position,l),d,c)}function c(t,e){const n=(0,s.Ni)(t.rings,!1,s.ZI.CCW_IS_HOLE),o=(0,i.projectBuffer)(n.position,t.spatialReference,0,n.position,e,0);for(let i=2;i<n.position.length;i+=3)n.position[i]=a.gi;return{position:n.position,polygons:h(n.polygons,n.position),outlines:u(n.outlines,n.position),projectionSuccess:o}}function u(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return t.filter((t=>{let{count:e}=t;return e>1})).map((t=>{let{index:i,count:s}=t;const r=3*i,a=3*s;return null!=n?new p(i,s,(0,o.Rq)(e,r,a),(0,o.Rq)(n,r,a)):new d(i,s,(0,o.Rq)(e,r,a))}))}function h(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const i=new Array;for(const{index:s,count:r,holeIndices:a,pathLengths:l}of t){if(r<=1)continue;const t=3*s,c=3*r,u=a.map((t=>t-s)),h=null!=n?new g(s,r,(0,o.Rq)(e,3*s,3*r),(0,o.Rq)(n,t,c),u,l):new y(s,r,(0,o.Rq)(e,3*s,3*r),u,l);i.push(h)}return i}class d{constructor(t,e,n){this.index=t,this.count=e,this.position=n}}class p extends d{constructor(t,e,n,i){super(t,e,n),this.mapPositions=i}}class g extends p{constructor(t,e,n,i,o,s){super(t,e,n,i),this.holeIndices=o,this.pathLengths=s}}class y extends d{constructor(t,e,n,i,o){super(t,e,n),this.holeIndices=i,this.pathLengths=o}}class f{constructor(t,e,n,i,o,s){this.position=t,this.mapPositions=e,this.polygons=n,this.outlines=i,this.projectionSuccess=o,this.sampledElevation=s}}}}]);
//# sourceMappingURL=4714.d33da5c2.chunk.js.map